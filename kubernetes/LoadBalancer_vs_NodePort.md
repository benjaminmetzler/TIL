# LoadBalancers

I've been struggling to get kubernetes running on my home network.  I have a set of VMs to act as the controllers and the nodes.  I was able to get kubernetes running and pods deployed to the nodes, but when I created a LoadBalancer service the service was stuck at a `pending` state trying to get an external IP address, i.e. an IP from my DHCP server.  Everything I tried failed to work and the service would be stuck at the `pending` state.  I combed through the documentation and a host of examples hoping to see what I missed.  Then I re-read the [kubernetes LoadBalancer Type description](https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer).  The first line in the description tells me what was wrong.  

> **On cloud providers which support external load balancers**, setting the `type` field to `LoadBalancer` provisions a load balancer for your Service. The actual creation of the load balancer happens asynchronously, and information about the provisioned balancer is published in the Service's .status.loadBalancer field.

I bolded the important text.  Kubernetes expects the cloud service (AWS, GCP, Azure, etc) to provide an external IP.  If I wanted to use kubernetes internally I needed to use [NodePort](https://kubernetes.io/docs/concepts/services-networking/service/#nodeport) (or apparently the [Ingress class](https://kubernetes.io/docs/concepts/services-networking/ingress/#ingress-class)).  Once I switched from a `LoadBalancer` to the `NodePort` type everything came up and I was able to connect to my app via the controller IP and the kubernetes assigned nodePort.
